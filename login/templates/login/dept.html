{% extends 'base.html' %}

{% load static %}

{% block head %}
<title>Question Connection</title>
<script>
  if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
      $('.selectpicker').selectpicker('mobile');
   }
   class Queue{
      constructor() { 
        this.queue = []; 
      } 
      enqueue(val){
         if(!this.queue.includes(val)){
            this.queue.push(val);
         }
      }
      dequeue(){ 
         if(this.queue.length == 0){ 
            return "Underflow"; 
         }
         return this.queue.shift(); 
      } 
      length(){
         return this.queue.length;
      }
   }

  var q = new Queue();
  var count = 0;
  function addMore(){
    count++;
    var div = document.getElementById("add");
    var search_element = document.createElement("input")
    search_element.type = "text";    
    search_element.id = count;
    search_element.className = "form-control";
    search_element.placeholder = "ex:CS,APMA,COMM,etc..";
    search_element.pattern = "([A-Z]|[a-z])*";
    search_element.name = "dept"
    div.appendChild(search_element);
    var br = document.createElement("br")
    br.id = count+"br";
    div.appendChild(br);
    q.enqueue(count);
  }

  function remove(){
    var val = q.dequeue();
    if(val){
      document.getElementById(val).remove();
      document.getElementById(val+"br").remove();
    }
  }
</script>
{% endblock %}


{% block navbar %}
  <ul class="navbar-nav text-uppercase ml-auto">
    <li class="nav-item">
      <a class="btn btn-primary btn-sm" href="{% url 'login:logout' %}">Logout</a>
    </li>
  </ul>
{% endblock %}

{% block body %}

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
<br>
      <div class="page-section" id="intro-form-heading">
          <div class="container">
            <div class="col">
              {% if is_tutor %}
              <h2>Please list out the departments your classes are in<span class="badge badge-secondary">Tutor</span></h2>
              {% else %}
              <h2>Please list out the departments your classes are in<span class="badge badge-secondary">Student</span></h2>
              {% endif %}
              <div class="py-2">
                <button type="add" class="btn btn-dark"  onclick="addMore()">Add More</button>
                <button type="remove" class="btn btn-light" onclick="remove()">Remove Last</button>
              </div>
            </div>
          <div class="row">
            <div class="col-lg-12 text-center">
            <form action="{% url 'login:selector' %}" method="post"> {% csrf_token %}
                  <div class="form-row align-items-center">
                    <div class="form-group py-2" id="add">
                      <input type="text" class="form-control" placeholder="ex:CS,APMA,COMM,etc.." pattern="([A-Z]|[a-z])*" name="dept">
                      <br>
                    </div>
                  </div>
                  <div class="form-group py-2">
                    <button type="submit" class="btn btn-primary">Search</button>
                  </div>
              </form>
            </div>
          </div>
          </div>
      </div>



{% endblock %}

